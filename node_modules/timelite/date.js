"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = require("./utils");
/**
 * Normalize string date values returning times valid date as an unsigned integer array.
 *
 * @param string str
 * @returns number[]
 */
function normalize(str) {
    var cyear = new Date().getFullYear();
    var parts = utils_1.splitDateTime(str, utils_1.DATE_SEPARATOR);
    var year = parts[0];
    var month = parts[1];
    var day = parts[2];
    // if year has two digits or less
    // convert to full year value
    if (year >= 0 && year <= 99) {
        year += cyear - cyear % 100;
    }
    // it is not times valid month number
    if (month < 1) {
        month = 1;
    }
    if (month > 12) {
        month = 12;
    }
    var daysInMonth = utils_1.getDaysInMonth(year, month);
    if (day < 1) {
        day = 1;
    }
    if (day > daysInMonth) {
        day = daysInMonth;
    }
    return [year, month, day];
}
exports.normalize = normalize;
/**
 * Format an array date values into string date.
 *
 * @param number[] arr Array of times to format. E.g. [2018, 12, 3]
 * @returns string String time format.
 */
function str(arr) {
    var times = normalize(utils_1.formatDateTime(arr, utils_1.DATE_SEPARATOR));
    return utils_1.formatDateTime(times, utils_1.DATE_SEPARATOR);
}
exports.str = str;
